TAP version 13
ok 1 - Test_ensureDeployment (0.01s)
# --- PASS: Test_ensureDeployment/Test:_EnsureDeployment_-_Multiclusterhub-repo (0.00s)
# --- PASS: Test_ensureDeployment/Test:_EnsureDeployment_-_Webhook (0.00s)
# --- PASS: Test_ensureDeployment/Test:_EnsureDeployment_-_Empty_Deployment (0.00s)
ok 2 - Test_ensureService (0.00s)
# --- PASS: Test_ensureService/Test:_ensureService_-_Multiclusterhub-repo (0.00s)
# --- PASS: Test_ensureService/Test:_ensureService_-_Webhook (0.00s)
# --- PASS: Test_ensureService/Test:_ensureService_-_update_Webhook_Service (0.00s)
# --- PASS: Test_ensureService/Test:_ensureService_-_Empty_service (0.00s)
ok 3 - Test_ensureAPIService (0.00s)
# --- PASS: Test_ensureAPIService/Test:_ensureAPIService_-_OCMProxyServer (0.00s)
# --- PASS: Test_ensureAPIService/Test:_ensureService_-_update_Webhook_Service (0.00s)
ok 4 - Test_ensureChannel (0.00s)
# --- PASS: Test_ensureChannel/Test:_ensureChannel_-_Multiclusterhub-repo (0.00s)
# --- PASS: Test_ensureChannel/Test:_ensureChannel_-_Empty_channel (0.00s)
ok 5 - Test_ensureSubscription (0.00s)
# --- PASS: Test_ensureSubscription/Test:_ensureSubscription_-_Management-ingress (0.00s)
# --- PASS: Test_ensureSubscription/Test:_ensureSubscription_-_Application-UI (0.00s)
# --- PASS: Test_ensureSubscription/Test:_ensureSubscription_-_Console (0.00s)
# --- PASS: Test_ensureSubscription/Test:_ensureSubscription_-_Insights (0.00s)
# --- PASS: Test_ensureSubscription/Test:_ensureSubscription_-_Discovery (0.00s)
# --- PASS: Test_ensureSubscription/Test:_ensureSubscription_-_GRC (0.00s)
# --- PASS: Test_ensureSubscription/Test:_ensureSubscription_-_KUI (0.00s)
# --- PASS: Test_ensureSubscription/Test:_ensureSubscription_-_cluster-lifecycle (0.00s)
# --- PASS: Test_ensureSubscription/Test:_ensureSubscription_-_Search (0.00s)
# --- PASS: Test_ensureSubscription/Test:_ensureSubscription_-_Empty_Sub (0.00s)
ok 6 - Test_ensureUnstructuredResource (0.00s)
# --- PASS: Test_ensureUnstructuredResource/Test:_ensureUnstructuredResource_-_ClusterManager (0.00s)
ok 7 - Test_OverrideImagesFromConfigmap (0.00s)
# --- PASS: Test_OverrideImagesFromConfigmap/Test:_OverrideImagesFromConfigmap_-_Nonexistant_configmap (0.00s)
# --- PASS: Test_OverrideImagesFromConfigmap/Test:_OverrideImagesFromConfigmap_-_Override_repo_image (0.00s)
# --- PASS: Test_OverrideImagesFromConfigmap/Test:_OverrideImagesFromConfigmap_-_New_image_added_from_Configmap (0.00s)
ok 8 - Test_maintainImageManifestConfigmap (0.00s)
ok 9 - Test_filterDeploymentsByRelease (0.00s)
# --- PASS: Test_filterDeploymentsByRelease/Deployment_with_release_label (0.00s)
# --- PASS: Test_filterDeploymentsByRelease/Deployments_with_no_matching_release_label (0.00s)
ok 10 - Test_addInstallerLabel (0.00s)
# --- PASS: Test_addInstallerLabel/Deployment_has_no_labels (0.00s)
# --- PASS: Test_addInstallerLabel/Deployment_has_desired_labels (0.00s)
# --- PASS: Test_addInstallerLabel/Wrong_installer_name_and_namespace (0.00s)
ok 11 - Test_getAppSubOwnedHelmReleases (0.00s)
# --- PASS: Test_getAppSubOwnedHelmReleases/No_matches (0.00s)
# --- PASS: Test_getAppSubOwnedHelmReleases/One_helmrelease_owned_by_appsub (0.00s)
ok 12 - Test_getHelmReleaseOwnedDeployments (0.00s)
# --- PASS: Test_getHelmReleaseOwnedDeployments/No_matches (0.00s)
# --- PASS: Test_getHelmReleaseOwnedDeployments/Two_deployments_owned_by_same_helmrelease (0.00s)
ok 13 - Test_getDeploymentByName (0.00s)
# --- PASS: Test_getDeploymentByName/Deployment_found (0.00s)
# --- PASS: Test_getDeploymentByName/Deployment_not_found (0.00s)
ok 14 - Test_isACMManaged (0.00s)
# --- PASS: Test_isACMManaged/Not_OLM_managed,_no_labels (0.00s)
# --- PASS: Test_isACMManaged/Not_OLM_managed,_with_labels (0.00s)
# --- PASS: Test_isACMManaged/OLM_managed (0.00s)
# --- PASS: Test_isACMManaged/OLM_managed_by_ACM (0.00s)
ok 15 - TestReconcileMultiClusterHub_ensureSubscriptionOperatorIsRunning (0.00s)
# --- PASS: TestReconcileMultiClusterHub_ensureSubscriptionOperatorIsRunning/Operators_are_in_sync (0.00s)
# --- PASS: TestReconcileMultiClusterHub_ensureSubscriptionOperatorIsRunning/Subscription_operator_is_not_up-to-date (0.00s)
# --- PASS: TestReconcileMultiClusterHub_ensureSubscriptionOperatorIsRunning/Not_running_MCH_operator_in_deployment (0.00s)
# --- PASS: TestReconcileMultiClusterHub_ensureSubscriptionOperatorIsRunning/Subscription_operator_is_missing (0.00s)
ok 16 - TestAddProxyEnvVarsToDeployment (0.00s)
ok 17 - TestAddProxyEnvVarsToSub (0.00s)
ok 18 - Test_cleanupHiveConfigs (0.00s)
# --- PASS: Test_cleanupHiveConfigs/Installer_Created_HiveConfig (0.00s)
# --- PASS: Test_cleanupHiveConfigs/Seperate_HiveConfig (0.00s)
ok 19 - Test_cleanupAPIServices (0.00s)
# --- PASS: Test_cleanupAPIServices/Without_Labels (0.00s)
# --- PASS: Test_cleanupAPIServices/With_Labels (0.00s)
ok 20 - Test_cleanupClusterRoles (0.00s)
# --- PASS: Test_cleanupClusterRoles/Without_Labels (0.00s)
# --- PASS: Test_cleanupClusterRoles/With_Labels (0.00s)
ok 21 - Test_cleanupClusterRoleBindings (0.00s)
# --- PASS: Test_cleanupClusterRoleBindings/Without_Labels (0.00s)
# --- PASS: Test_cleanupClusterRoleBindings/With_Labels (0.00s)
ok 22 - Test_cleanupMutatingWebhooks (0.00s)
# --- PASS: Test_cleanupMutatingWebhooks/Without_Labels (0.00s)
# --- PASS: Test_cleanupMutatingWebhooks/With_Labels (0.00s)
ok 23 - Test_cleanupValidatingWebhooks (0.00s)
# --- PASS: Test_cleanupValidatingWebhooks/Without_Labels (0.00s)
# --- PASS: Test_cleanupValidatingWebhooks/With_Labels (0.00s)
ok 24 - Test_cleanupPullSecret (0.00s)
# --- PASS: Test_cleanupPullSecret/Without_Labels (0.00s)
ok 25 - Test_cleanupCRDS (0.00s)
# --- PASS: Test_cleanupCRDS/Without_Labels (0.00s)
# --- PASS: Test_cleanupCRDS/With_Labels (0.00s)
ok 26 - Test_cleanupClusterManagers (0.00s)
# --- PASS: Test_cleanupClusterManagers/Installer_Created_ClusterManager (0.00s)
# --- PASS: Test_cleanupClusterManagers/Seperate_ClusterManager (0.00s)
ok 27 - Test_cleanupAppSubscriptions (0.00s)
# --- PASS: Test_cleanupAppSubscriptions/Installer_Created_Appsubscriptions (0.00s)
ok 28 - Test_cleanupFoundation (0.00s)
# --- PASS: Test_cleanupFoundation/Installer_Foundation_Artefacts (0.00s)
ok 29 - Test_ensureHubIsImported (0.00s)
# --- PASS: Test_ensureHubIsImported/Status_phase_'running' (0.00s)
ok 30 - Test_ensureHubIsExported (0.00s)
# --- PASS: Test_ensureHubIsExported/Status_phase_'running' (0.00s)
ok 31 - Test_ensureHubNamespaceIsRemoved (0.00s)
# --- PASS: Test_ensureHubNamespaceIsRemoved/Create_Namespace (0.00s)
# --- PASS: Test_ensureHubNamespaceIsRemoved/Namespace_nonexistant (0.00s)
ok 32 - Test_ensureManagedCluster (0.00s)
ok 33 - Test_removeManagedCluster (0.00s)
ok 34 - Test_ensureKlusterletAddonConfig (0.00s)
ok 35 - Test_ReconcileMultiClusterHub (1.57s)
# --- PASS: Test_ReconcileMultiClusterHub/Full_Valid_MCH (0.60s)
# --- PASS: Test_ReconcileMultiClusterHub/Without_Status (0.17s)
# --- PASS: Test_ReconcileMultiClusterHub/AvailabilityConfig (0.52s)
# --- PASS: Test_ReconcileMultiClusterHub/CloudPakCompatibility (0.28s)
ok 36 - Test_setDefaults (0.00s)
# --- PASS: Test_setDefaults/Full_Valid_MCH (0.00s)
# --- PASS: Test_setDefaults/Without_Status (0.00s)
ok 37 - Test_allComponentsSuccessful (0.00s)
# --- PASS: Test_allComponentsSuccessful/Single_available_component (0.00s)
# --- PASS: Test_allComponentsSuccessful/Single_unavailable_component (0.00s)
ok 38 - Test_latestHelmReleaseCondition (0.00s)
# --- PASS: Test_latestHelmReleaseCondition/Deployed_after_initialized (0.00s)
ok 39 - Test_latestDeployCondition (0.00s)
# --- PASS: Test_latestDeployCondition/Deployed_after_initialized (0.00s)
# --- PASS: Test_latestDeployCondition/Progressing_after_available (0.00s)
ok 40 - TestSetHubCondition (0.00s)
# --- PASS: TestSetHubCondition/Add_single_hubcondition (0.00s)
# --- PASS: TestSetHubCondition/No_duplicate_hubconditions (0.00s)
# --- PASS: TestSetHubCondition/Retain_last_transition_time (0.00s)
ok 41 - TestGetHubCondition (0.00s)
# --- PASS: TestGetHubCondition/present (0.00s)
# --- PASS: TestGetHubCondition/absent (0.00s)
ok 42 - TestRemoveHubCondition (0.00s)
# --- PASS: TestRemoveHubCondition/empty_status (0.00s)
# --- PASS: TestRemoveHubCondition/remove_conditions (0.00s)
# --- PASS: TestRemoveHubCondition/don't_remove_condition (0.00s)
ok 43 - Test_filterDuplicateHRs (0.00s)
# --- PASS: Test_filterDuplicateHRs/All_helmrelease_owner_references_unique (0.00s)
# --- PASS: Test_filterDuplicateHRs/Two_helmreleases_with_same_owning_appsub (0.00s)
ok 44 - Test_aggregatePhase (0.00s)
# --- PASS: Test_aggregatePhase/Running_hub_with_previous_version (0.00s)
# --- PASS: Test_aggregatePhase/Running_hub_with_current_version (0.00s)
# --- PASS: Test_aggregatePhase/Progressing_hub_with_previous_version (0.00s)
# --- PASS: Test_aggregatePhase/Progressing_hub_with_current_version (0.00s)
# --- PASS: Test_aggregatePhase/Progressing_hub_with_no_version (0.00s)
# --- PASS: Test_aggregatePhase/Running_hub_with_no_version (0.00s)
ok 45 - Test_newUnstructured (0.00s)
# --- PASS: Test_newUnstructured/Subscription (0.00s)
# --- PASS: Test_newUnstructured/RcmSubscription (0.00s)
# --- PASS: Test_newUnstructured/CRD (0.00s)
# --- PASS: Test_newUnstructured/MirroredManaged (0.00s)
ok 46 - TestReconcileMultiClusterHub_uninstall (0.00s)
# --- PASS: TestReconcileMultiClusterHub_uninstall/Uninstall_existing_CRD (0.00s)
# --- PASS: TestReconcileMultiClusterHub_uninstall/Uninstall_nonexisting_CRD (0.00s)
ok 47 - Test_getImageFromManifestByKey (0.00s)
# --- PASS: Test_getImageFromManifestByKey/Proper_image_key_given (0.00s)
# --- PASS: Test_getImageFromManifestByKey/Improper_image_key_given (0.00s)
ok 48 - Test_ensureKlusterletAddonConfigPausedStatus (0.00s)
# --- PASS: Test_ensureKlusterletAddonConfigPausedStatus/should_return_error_if_not_found (0.00s)
# --- PASS: Test_ensureKlusterletAddonConfigPausedStatus/should_set_pause_if_want_pause_and_not_in_pause_staus (0.00s)
# --- PASS: Test_ensureKlusterletAddonConfigPausedStatus/should_set_pause_if_want_pause_and_not_in_pause_staus#01 (0.00s)
# --- PASS: Test_ensureKlusterletAddonConfigPausedStatus/should_do_nothing_if_want_pause_and_already_in_pause (0.00s)
# --- PASS: Test_ensureKlusterletAddonConfigPausedStatus/should_resume_if_don't_want_pause_and_already_in_pause (0.00s)
# --- PASS: Test_ensureKlusterletAddonConfigPausedStatus/should_do_nothing_if_don't_want_pause_and_not_in_pause (0.00s)
ok 49 - Test_ensureAppmgrManifestWorkImage (0.00s)
# --- PASS: Test_ensureAppmgrManifestWorkImage/should_return_error_if_not_found (0.00s)
# --- PASS: Test_ensureAppmgrManifestWorkImage/should_do_nothing_if_using_correct_image (0.00s)
# --- PASS: Test_ensureAppmgrManifestWorkImage/should_return_error_if_there_is_no_ApplicationManager (0.00s)
# --- PASS: Test_ensureAppmgrManifestWorkImage/should_set_image_if_image_is_not_the_same (0.00s)
ok 50 - Test_ensureAppmgrPodImage (0.00s)
# --- PASS: Test_ensureAppmgrPodImage/should_do_nothing_if_pod_not_found (0.00s)
# --- PASS: Test_ensureAppmgrPodImage/should_do_nothing_if_old_pod_is_not_running (0.00s)
# --- PASS: Test_ensureAppmgrPodImage/should_return_error_if_old_pod_is_running_and_using_the_old_image (0.00s)
# --- PASS: Test_ensureAppmgrPodImage/should_do_nothing_if_all_pods_are_using_the_new_image (0.00s)
1..50
